(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1Ff/":function(t,e,i){"use strict";i.d(e,"a",function(){return o});class o{constructor(){this.actualpage=0,this.filterRequest={object:{},pageNumber:0,pageSize:10}}initPaginated(){this.pagesize=10,this.actualpage=1,this.arrayvalueitemsperpage=["5","10","20","50","100"]}calculatePage(){this.filterRequest.pageNumber=this.actualpage-1,this.filterRequest.pageSize=this.pagesize}resetPaginated(){this.actualpage=0,this.filterRequest.pageSize=0,this.filterForm.reset()}}},"2Yyj":function(t,e,i){var o,r,n;!function(c){if("object"==typeof t.exports){var a=c(0,e);void 0!==a&&(t.exports=a)}else r=[i,e],void 0===(n="function"==typeof(o=c)?o.apply(e,r):o)||(t.exports=n)}(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=void 0;e.default=["es",[["a.\xa0m.","p.\xa0m."],i,i],i,[["D","L","M","X","J","V","S"],["dom.","lun.","mar.","mi\xe9.","jue.","vie.","s\xe1b."],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],i,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],i,[["a. C.","d. C."],i,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1} {0}",i,"{1}, {0}",i],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[i,"$"],BRL:[i,"R$"],CNY:[i,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[i,"\xa3"],HKD:[i,"$"],ILS:[i,"\u20aa"],INR:[i,"\u20b9"],JPY:[i,"\xa5"],KRW:[i,"\u20a9"],MXN:[i,"$"],NZD:[i,"$"],RON:[i,"L"],THB:["\u0e3f"],TWD:[i,"NT$"],USD:["US$","$"],XAF:[],XCD:[i,"$"],XOF:[]},"ltr",function(t){return 1===t?1:5}]})},KFjf:function(t,e,i){"use strict";i.r(e),i.d(e,"LocationsModule",function(){return B});var o=i("ofXK"),r=i("tyNb"),n=i("3Pt+"),c=i("SxV6"),a=i("fXoL"),s=i("AytR"),b=i("tk/3");const l=`${s.a.apiUrl}/locations`;let d=(()=>{class t{constructor(t){this.http=t}getAll(){return this.http.get(`${l}`)}getById(t){return this.http.get(`${l}/${t}`)}create(t){return this.http.post(l,t)}update(t,e){return this.http.put(`${l}/${t}`,e)}delete(t){return this.http.delete(`${l}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(a.fc(b.b))},t.\u0275prov=a.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("+Woh"),g=i("J9tS"),p=i("1kSV");function f(t,e){1&t&&(a.Yb(0,"h4"),a.Ub(1,"i",28),a.Jc(2,"Agregar Localidad "),a.Xb())}function h(t,e){1&t&&(a.Yb(0,"h4"),a.Ub(1,"i",28),a.Jc(2,"Editar Localidad "),a.Xb())}function m(t,e){1&t&&(a.Yb(0,"div"),a.Jc(1," Nombre de localidad es obligatorio "),a.Xb())}function v(t,e){if(1&t&&(a.Yb(0,"div",29),a.Hc(1,m,2,0,"div",2),a.Xb()),2&t){const t=a.kc();a.Hb(1),a.rc("ngIf",t.f.locationName.errors.required)}}function X(t,e){1&t&&(a.Yb(0,"div"),a.Jc(1," Direcci\xf3n de localidad es obligatoria "),a.Xb())}function Y(t,e){if(1&t&&(a.Yb(0,"div",29),a.Hc(1,X,2,0,"div",2),a.Xb()),2&t){const t=a.kc();a.Hb(1),a.rc("ngIf",t.f.fullAddress.errors.required)}}function H(t,e){1&t&&(a.Yb(0,"div"),a.Jc(1," Nota de localidad es obligatoria "),a.Xb())}function y(t,e){if(1&t&&(a.Yb(0,"div",29),a.Hc(1,H,2,0,"div",2),a.Xb()),2&t){const t=a.kc();a.Hb(1),a.rc("ngIf",t.f.note.errors.required)}}function I(t,e){if(1&t&&(a.Yb(0,"option",30),a.Jc(1),a.Xb()),2&t){const t=e.$implicit;a.sc("value",t.cityId),a.Hb(1),a.Lc(" ",t.name," ")}}function C(t,e){1&t&&(a.Yb(0,"p"),a.Jc(1,"Si no encuentra la ciudad deseada, elige la m\xe1s cerna"),a.Xb())}function J(t,e){1&t&&(a.Yb(0,"div"),a.Jc(1,"C\xf3digo de la ciudad es obligatorio"),a.Xb())}function A(t,e){if(1&t&&(a.Yb(0,"div",29),a.Hc(1,J,2,0,"div",2),a.Xb()),2&t){const t=a.kc();a.Hb(1),a.rc("ngIf",t.f.cityId.errors.required)}}function k(t,e){1&t&&(a.Yb(0,"div"),a.Jc(1,"Activo es obligatorio"),a.Xb())}function N(t,e){if(1&t&&(a.Yb(0,"div",29),a.Hc(1,k,2,0,"div",2),a.Xb()),2&t){const t=a.kc();a.Hb(1),a.rc("ngIf",t.f.active.errors.required)}}function S(t,e){1&t&&a.Ub(0,"span",31)}const x=function(t){return{"is-invalid":t}};let L=(()=>{class t{constructor(t,e,i,o,r,n){this.formBuilder=t,this.route=e,this.router=i,this.locationService=o,this.cityService=r,this.alertService=n,this.loading=!1,this.submitted=!1,this.activeLabel="S\xed"}ngOnInit(){this.cityService.getAll().subscribe(t=>{this.citiesCollection=t.listElements}),this.id=this.route.snapshot.params.id,this.isAddMode=this.id<=0,this.form=this.formBuilder.group({locationId:["0"],locationName:["",n.o.required],fullAddress:["",n.o.required],note:["",n.o.required],cityId:["",n.o.required],active:[!0,n.o.required]}),this.isAddMode||this.locationService.getById(this.id).pipe(Object(c.a)()).subscribe(t=>{this.currentLocation=t.element,this.form.patchValue(t.element),this.form.controls.active.patchValue(t.element.active),this.activeToggle()})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createLocation():this.updateLocation())}createLocation(){this.locationService.create(this.form.value).pipe(Object(c.a)()).subscribe(()=>{this.alertService.success("Localidad agregada",{keepAfterRouteChange:!0}),this.router.navigate(["/locations"],{relativeTo:this.route})}).add(()=>this.loading=!1)}updateLocation(){this.locationService.update(this.id,this.form.value).pipe(Object(c.a)()).subscribe(()=>{this.alertService.success("Localidad actualizada",{keepAfterRouteChange:!0}),this.router.navigate(["/locations"],{relativeTo:this.route})}).add(()=>this.loading=!1)}onChangeRole(t){this.form.controls.locationId.patchValue(t.target.value)}activeToggle(){this.activeLabel=this.form.get("active").value?"S\xed":"No"}cityChange(t){}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(n.c),a.Tb(r.a),a.Tb(r.c),a.Tb(d),a.Tb(u.a),a.Tb(g.b))},t.\u0275cmp=a.Nb({type:t,selectors:[["app-location-editor"]],decls:54,vars:28,consts:[[1,"p-4"],[1,"container",2,"background-color","rgba(255, 255, 255, 0.4)","border-radius","4px","padding","10px 10px","box-shadow","0 0 25px -6px rgba(0, 0, 0, 0.9)"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","g-2"],[1,"form-group","col"],[1,"form-floating"],["type","text","formControlName","locationName","placeholder","Administrador","id","locationName",1,"form-control",3,"ngClass"],["for","name"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","fullAddress","placeholder","Administrador","id","fullAddress",1,"form-control",3,"ngClass"],[1,"row","g-3"],["type","text","formControlName","note","placeholder","Administrador","id","note",1,"form-control",3,"ngClass"],["formControlName","cityId","id","cityId","aria-label","cityId",1,"form-select",3,"ngClass","ngbTooltip","change"],[3,"value",4,"ngFor","ngForOf"],["tipContent",""],["for","cityId","data-bs-toggle","popover","title","Popover title","data-bs-content","And here's some amazing content. It's very engaging. Right?"],[2,"display","block","background-color","rgba(255, 255, 255)","border-radius","4px","padding-left","0.5rem","padding-top","0.2rem"],[2,"color","grey","font-size","small"],[1,"form-check","form-switch",2,"margin-top","0.3rem"],["type","checkbox","formControlName","active",1,"form-check-input",3,"ngClass","change"],["for","Active",1,"form-check-label"],[1,"row"],[1,"form-group"],[2,"float","right"],[1,"btn","btn-primary","me-2",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/locations",1,"btn","btn-secondary"],[1,"bi-geo-alt-fill",2,"color","black","margin-right","8px"],[1,"invalid-feedback"],[3,"value"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,e){if(1&t&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Hc(2,f,3,0,"h4",2),a.Hc(3,h,3,0,"h4",2),a.Ub(4,"hr"),a.Yb(5,"form",3),a.ic("ngSubmit",function(){return e.onSubmit()}),a.Yb(6,"div",4),a.Yb(7,"div",5),a.Yb(8,"div",6),a.Ub(9,"input",7),a.Yb(10,"label",8),a.Jc(11,"Nombre"),a.Xb(),a.Hc(12,v,2,1,"div",9),a.Xb(),a.Xb(),a.Yb(13,"div",5),a.Yb(14,"div",6),a.Ub(15,"input",10),a.Yb(16,"label",8),a.Jc(17,"Direcci\xf3n"),a.Xb(),a.Hc(18,Y,2,1,"div",9),a.Xb(),a.Xb(),a.Xb(),a.Ub(19,"br"),a.Yb(20,"div",11),a.Yb(21,"div",5),a.Yb(22,"div",6),a.Ub(23,"input",12),a.Yb(24,"label",8),a.Jc(25,"Nota"),a.Xb(),a.Hc(26,y,2,1,"div",9),a.Xb(),a.Xb(),a.Yb(27,"div",5),a.Yb(28,"div",6),a.Yb(29,"select",13),a.ic("change",function(t){return e.cityChange(t)}),a.Hc(30,I,2,2,"option",14),a.Xb(),a.Hc(31,C,2,0,"ng-template",null,15,a.Ic),a.Yb(33,"label",16),a.Jc(34,"Ciudad clima"),a.Xb(),a.Hc(35,A,2,1,"div",9),a.Xb(),a.Xb(),a.Yb(36,"div",5),a.Yb(37,"div",17),a.Yb(38,"label",18),a.Jc(39,"Activo"),a.Xb(),a.Yb(40,"div",19),a.Yb(41,"input",20),a.ic("change",function(){return e.activeToggle()}),a.Xb(),a.Yb(42,"label",21),a.Jc(43),a.Xb(),a.Xb(),a.Hc(44,N,2,1,"div",9),a.Xb(),a.Xb(),a.Xb(),a.Ub(45,"hr"),a.Yb(46,"div",22),a.Yb(47,"div",23),a.Yb(48,"div",24),a.Yb(49,"button",25),a.Hc(50,S,1,0,"span",26),a.Jc(51," Guardar "),a.Xb(),a.Yb(52,"button",27),a.Jc(53," Cancelar "),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&t){const t=a.zc(32);a.Hb(2),a.rc("ngIf",e.isAddMode),a.Hb(1),a.rc("ngIf",!e.isAddMode),a.Hb(2),a.rc("formGroup",e.form),a.Hb(4),a.rc("ngClass",a.vc(18,x,e.submitted&&e.f.locationName.errors)),a.Hb(3),a.rc("ngIf",e.submitted&&e.f.locationName.errors),a.Hb(3),a.rc("ngClass",a.vc(20,x,e.submitted&&e.f.fullAddress.errors)),a.Hb(3),a.rc("ngIf",e.submitted&&e.f.fullAddress.errors),a.Hb(5),a.rc("ngClass",a.vc(22,x,e.submitted&&e.f.note.errors)),a.Hb(3),a.rc("ngIf",e.submitted&&e.f.note.errors),a.Hb(3),a.rc("ngClass",a.vc(24,x,e.submitted&&e.f.cityId.errors))("ngbTooltip",t),a.Hb(1),a.rc("ngForOf",e.citiesCollection),a.Hb(5),a.rc("ngIf",e.submitted&&e.f.cityId.errors),a.Hb(6),a.rc("ngClass",a.vc(26,x,e.submitted&&e.f.active.errors)),a.Hb(2),a.Kc(e.activeLabel),a.Hb(1),a.rc("ngIf",e.submitted&&e.f.active.errors),a.Hb(5),a.rc("disabled",e.loading),a.Hb(1),a.rc("ngIf",e.loading)}},directives:[o.m,n.q,n.j,n.e,n.b,n.i,n.d,o.k,n.n,p.c,o.l,n.a,r.d,n.l,n.p],encapsulation:2}),t})();var M=i("mrSG"),w=i("1Ff/"),U=i("2Yyj"),j=i.n(U),$=i("oOf3");function O(t,e){1&t&&(a.Yb(0,"a",21),a.Ub(1,"i",22),a.Jc(2,"Nuevo "),a.Xb())}function P(t,e){if(1&t&&(a.Yb(0,"option",23),a.Jc(1),a.Xb()),2&t){const t=e.$implicit;a.rc("value",t),a.Hb(1),a.Lc(" ",t," ")}}function R(t,e){if(1&t&&(a.Yb(0,"a",27),a.Ub(1,"i",28),a.Jc(2,"Editar"),a.Xb()),2&t){const t=a.kc().$implicit;a.tc("routerLink","../location-editor/",t.locationId,"")}}function z(t,e){if(1&t){const t=a.Zb();a.Yb(0,"a",29),a.ic("click",function(){a.Cc(t);const e=a.kc().$implicit;return a.kc().deleteLocation(e.locationId)}),a.Ub(1,"i",30),a.Jc(2,"Borrar"),a.Xb()}}function T(t,e){if(1&t&&(a.Yb(0,"tr"),a.Yb(1,"td"),a.Jc(2),a.Xb(),a.Yb(3,"td"),a.Jc(4),a.Xb(),a.Yb(5,"td"),a.Jc(6),a.Xb(),a.Yb(7,"td"),a.Jc(8),a.Xb(),a.Yb(9,"td"),a.Jc(10),a.Xb(),a.Yb(11,"td",24),a.Hc(12,R,3,1,"a",25),a.Hc(13,z,3,0,"a",26),a.Xb(),a.Xb()),2&t){const t=e.$implicit,i=a.kc();a.Hb(2),a.Kc(t.locationName),a.Hb(2),a.Kc(t.fullAddress),a.Hb(2),a.Kc(t.cityId),a.Hb(2),a.Kc(t.note),a.Hb(2),a.Kc(t.active?"Si":"No"),a.Hb(2),a.rc("ngIf",i.isAdmin),a.Hb(1),a.rc("ngIf",i.isAdmin&&t.locationId>1)}}function E(t,e){1&t&&(a.Yb(0,"tr"),a.Yb(1,"td",31),a.Ub(2,"span",32),a.Xb(),a.Xb())}const F=function(t,e,i){return{itemsPerPage:t,currentPage:e,totalItems:i}};let q=(()=>{class t extends w.a{constructor(t,e){super(),this.locationService=t,this.accountService=e,this.isAdmin=!1,this.currentUser=this.accountService.userValue,this.isAdmin="Administrador"==this.currentUser.role.roleName,Object(o.z)(j.a,"es")}ngOnInit(){return Object(M.a)(this,void 0,void 0,function*(){yield this.locationService.getAll().subscribe(t=>{this.locationsCollection=t.listElements,this.page=t}),this.initPaginated()})}deleteLocation(t){const e=this.locationsCollection.find(e=>e.locationId===t);e&&(e.isDeleting=!0,this.locationService.delete(t).pipe(Object(c.a)()).subscribe(()=>this.locationsCollection=this.locationsCollection.filter(e=>e.locationId!==t)))}getPage(t){return Object(M.a)(this,void 0,void 0,function*(){try{this.actualpage=t,this.calculatePage(),yield this.locationService.getAll().subscribe(t=>{this.locationsCollection=t.listElements,this.page=t}),this.page&&(this.totalRegister=this.page.totalElements)}catch(e){}})}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(d),a.Tb(g.a))},t.\u0275cmp=a.Nb({type:t,selectors:[["app-locations-list"]],features:[a.Eb],decls:44,vars:15,consts:[[1,"p-4"],[1,"container",2,"background-color","rgba(255, 255, 255, 0.4)","border-radius","4px","padding","10px 10px","box-shadow","0 0 25px -6px rgba(0, 0, 0, 0.9)"],[1,"row"],[1,"col-10"],[1,"bi-geo-alt-fill",2,"color","black","margin-right","8px"],[1,"col-2","text-center"],["routerLink","../location-editor/0","class","btn btn-sm btn-secondary mr-1",4,"ngIf"],[1,"col","text-center"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[2,"overflow-x","auto"],[1,"table","table-striped"],[2,"width","10%"],[2,"width","20%"],[2,"width","5%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","4",1,"align-left"],[1,"small"],["colspan","8",1,"text-center"],["previousLabel","","nextLabel","",3,"pageChange"],["routerLink","../location-editor/0",1,"btn","btn-sm","btn-secondary","mr-1"],[1,"bi-plus-circle",2,"color","white","margin-right","8px"],[3,"value"],[2,"white-space","nowrap"],["class","btn btn-sm btn-secondary mr-1",3,"routerLink",4,"ngIf"],["class","btn btn-sm btn-danger mr-1",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","mr-1",3,"routerLink"],[1,"bi-pencil-fill",2,"color","white","margin-right","8px"],[1,"btn","btn-sm","btn-danger","mr-1",3,"click"],[1,"bi-trash-fill",2,"color","white","margin-right","8px"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(t,e){1&t&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"h4"),a.Ub(5,"i",4),a.Jc(6,"Localidades "),a.Xb(),a.Xb(),a.Yb(7,"div",5),a.Hc(8,O,3,0,"a",6),a.Xb(),a.Xb(),a.Ub(9,"hr"),a.Yb(10,"div",2),a.Yb(11,"div",7),a.Yb(12,"label"),a.Jc(13,"Items por p\xe1gina: "),a.Xb(),a.Yb(14,"select",8),a.ic("ngModelChange",function(t){return e.pagesize=t})("change",function(){return e.getPage(1)}),a.Hc(15,P,2,2,"option",9),a.Xb(),a.Xb(),a.Xb(),a.Yb(16,"div",10),a.Yb(17,"table",11),a.Yb(18,"thead"),a.Yb(19,"tr"),a.Yb(20,"th",12),a.Jc(21,"Nombre"),a.Xb(),a.Yb(22,"th",13),a.Jc(23,"Direccion"),a.Xb(),a.Yb(24,"th",12),a.Jc(25,"Ciudad"),a.Xb(),a.Yb(26,"th",12),a.Jc(27,"Nota"),a.Xb(),a.Yb(28,"th",14),a.Jc(29,"Activo"),a.Xb(),a.Ub(30,"th",12),a.Xb(),a.Xb(),a.Yb(31,"tbody"),a.Hc(32,T,14,7,"tr",15),a.lc(33,"paginate"),a.Hc(34,E,3,0,"tr",16),a.Yb(35,"tr"),a.Yb(36,"td",17),a.Yb(37,"span"),a.Yb(38,"strong",18),a.Jc(39),a.Xb(),a.Xb(),a.Xb(),a.Yb(40,"td",19),a.Yb(41,"span"),a.Yb(42,"pagination-controls",20),a.ic("pageChange",function(t){return e.getPage(t)}),a.Xb(),a.Xb(),a.Xb(),a.Ub(43,"td"),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&t&&(a.Hb(8),a.rc("ngIf",e.isAdmin),a.Hb(6),a.rc("ngModel",e.pagesize),a.Hb(1),a.rc("ngForOf",e.arrayvalueitemsperpage),a.Hb(17),a.rc("ngForOf",a.nc(33,8,e.locationsCollection,a.xc(11,F,e.pagesize,e.actualpage,e.totalRegister))),a.Hb(2),a.rc("ngIf",!e.locationsCollection),a.Hb(5),a.Nc(" Total de Registros: ",null==e.page?null:e.page.totalElements," | P\xe1gina ",null==e.page?null:e.page.pageNumber," de ",null==e.page?null:e.page.totalPages," "))},directives:[o.m,n.n,n.i,n.k,o.l,$.c,r.f,n.l,n.p],pipes:[$.b],encapsulation:2}),t})();const D=[{path:"",component:q},{path:"locationslist",component:q,pathMatch:"full"},{path:"city-editor/:id",component:L,pathMatch:"full"},{path:"location-editor/:id",component:L,pathMatch:"full"}];let K=(()=>{class t{}return t.\u0275mod=a.Rb({type:t}),t.\u0275inj=a.Qb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(D)],r.g]}),t})(),B=(()=>{class t{}return t.\u0275mod=a.Rb({type:t}),t.\u0275inj=a.Qb({factory:function(e){return new(e||t)},imports:[[o.b,n.f,n.m,K,$.a,p.a]]}),t})()}}]);