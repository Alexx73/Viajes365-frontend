(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"1Ff/":function(e,t,i){"use strict";i.d(t,"a",function(){return r});class r{constructor(){this.actualpage=0,this.filterRequest={object:{},pageNumber:0,pageSize:10}}initPaginated(){this.pagesize=10,this.actualpage=1,this.arrayvalueitemsperpage=["5","10","20","50","100"]}calculatePage(){this.filterRequest.pageNumber=this.actualpage-1,this.filterRequest.pageSize=this.pagesize}resetPaginated(){this.actualpage=0,this.filterRequest.pageSize=0,this.filterForm.reset()}}},zrcO:function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",function(){return ze});var r=i("3Pt+"),o=i("ofXK"),a=i("tyNb"),s=i("fXoL");let n=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Nb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&s.Ub(0,"router-outlet")},directives:[a.h],encapsulation:2}),e})();var c=i("mrSG"),h=i("SxV6"),p=i("1Ff/"),d=i("J9tS"),l=i("oOf3");function g(e,t){if(1&e&&(s.Yb(0,"option",19),s.Jc(1),s.Xb()),2&e){const e=t.$implicit;s.rc("value",e),s.Hb(1),s.Lc(" ",e," ")}}function m(e,t){1&e&&s.Ub(0,"span",26)}function b(e,t){1&e&&(s.Yb(0,"span"),s.Ub(1,"i",27),s.Jc(2,"Borrar"),s.Xb())}function u(e,t){if(1&e){const e=s.Zb();s.Yb(0,"button",24),s.ic("click",function(){s.Cc(e);const t=s.kc().$implicit;return s.kc().deleteUser(t.userId)}),s.Hc(1,m,1,0,"span",25),s.Hc(2,b,3,0,"span",14),s.Xb()}if(2&e){const e=s.kc().$implicit;s.rc("disabled",e.isDeleting),s.Hb(1),s.rc("ngIf",e.isDeleting),s.Hb(1),s.rc("ngIf",!e.isDeleting)}}function f(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Jc(2),s.Xb(),s.Yb(3,"td"),s.Jc(4),s.Xb(),s.Yb(5,"td"),s.Jc(6),s.Xb(),s.Yb(7,"td"),s.Jc(8),s.Xb(),s.Yb(9,"td"),s.Jc(10),s.Xb(),s.Yb(11,"td",20),s.Yb(12,"a",21),s.Ub(13,"i",22),s.Jc(14,"Editar"),s.Xb(),s.Hc(15,u,3,3,"button",23),s.Xb(),s.Xb()),2&e){const e=t.$implicit;s.Hb(2),s.Mc("",e.firstName,", ",e.lastName,""),s.Hb(2),s.Kc(e.email),s.Hb(2),s.Kc(e.userName),s.Hb(2),s.Kc(e.role.roleName),s.Hb(2),s.Kc(e.active?"Si":"No"),s.Hb(2),s.tc("routerLink","../edit/",e.userId,""),s.Hb(3),s.rc("ngIf",e.userId>1)}}function v(e,t){1&e&&(s.Yb(0,"tr"),s.Yb(1,"td",28),s.Ub(2,"span",29),s.Xb(),s.Xb())}const x=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}};let M=(()=>{class e extends p.a{constructor(e){super(),this.userService=e}ngOnInit(){return Object(c.a)(this,void 0,void 0,function*(){yield this.userService.getAll().subscribe(e=>{this.usersCollection=e.listElements,this.page=e}),this.initPaginated()})}deleteUser(e){const t=this.usersCollection.find(t=>t.userId===e);t&&(t.isDeleting=!0,this.userService.delete(e).pipe(Object(h.a)()).subscribe(()=>this.usersCollection=this.usersCollection.filter(t=>t.userId!==e)))}getPage(e){return Object(c.a)(this,void 0,void 0,function*(){try{this.actualpage=e,this.calculatePage(),yield this.userService.getAll().subscribe(e=>{this.usersCollection=e.listElements,this.page=e}),this.page&&(this.totalRegister=this.page.totalElements)}catch(t){}})}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(d.f))},e.\u0275cmp=s.Nb({type:e,selectors:[["ng-component"]],features:[s.Eb],decls:40,vars:14,consts:[[1,"p-4"],[1,"container",2,"background-color","rgba(255, 255, 255, 0.4)","border-radius","4px","padding","10px 10px","box-shadow","0 0 25px -6px rgba(0, 0, 0, 0.9)"],[1,"bi-people-fill",2,"color","black","margin-right","8px"],[1,"row"],[1,"col","text-center"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[2,"overflow-x","auto"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","20%"],[2,"width","15%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"align-left"],[1,"small"],["colspan","5",1,"text-center"],["previousLabel","","nextLabel","",3,"pageChange"],[3,"value"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"bi-pencil-fill",2,"color","white","margin-right","8px"],["class","btn btn-sm btn-danger btn-delete-user",3,"disabled","click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],[1,"bi-trash-fill",2,"color","white","margin-right","8px"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"h4"),s.Ub(3,"i",2),s.Jc(4,"Usuarios "),s.Xb(),s.Ub(5,"hr"),s.Yb(6,"div",3),s.Yb(7,"div",4),s.Yb(8,"label"),s.Jc(9,"Items por p\xe1gina: "),s.Xb(),s.Yb(10,"select",5),s.ic("ngModelChange",function(e){return t.pagesize=e})("change",function(){return t.getPage(1)}),s.Hc(11,g,2,2,"option",6),s.Xb(),s.Xb(),s.Xb(),s.Yb(12,"div",7),s.Yb(13,"table",8),s.Yb(14,"thead"),s.Yb(15,"tr"),s.Yb(16,"th",9),s.Jc(17,"Nombre y Apellido"),s.Xb(),s.Yb(18,"th",10),s.Jc(19,"Email"),s.Xb(),s.Yb(20,"th",11),s.Jc(21,"Usuario"),s.Xb(),s.Yb(22,"th",11),s.Jc(23,"Rol"),s.Xb(),s.Yb(24,"th",12),s.Jc(25,"Activo"),s.Xb(),s.Ub(26,"th",12),s.Xb(),s.Xb(),s.Yb(27,"tbody"),s.Hc(28,f,16,8,"tr",13),s.lc(29,"paginate"),s.Hc(30,v,3,0,"tr",14),s.Yb(31,"tr"),s.Yb(32,"td"),s.Yb(33,"span",15),s.Yb(34,"strong",16),s.Jc(35),s.Xb(),s.Xb(),s.Xb(),s.Yb(36,"td",17),s.Yb(37,"span"),s.Yb(38,"pagination-controls",18),s.ic("pageChange",function(e){return t.getPage(e)}),s.Xb(),s.Xb(),s.Xb(),s.Ub(39,"td"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&e&&(s.Hb(10),s.rc("ngModel",t.pagesize),s.Hb(1),s.rc("ngForOf",t.arrayvalueitemsperpage),s.Hb(17),s.rc("ngForOf",s.nc(29,7,t.usersCollection,s.xc(10,x,t.pagesize,t.actualpage,t.totalRegister))),s.Hb(2),s.rc("ngIf",!t.usersCollection),s.Hb(5),s.Nc(" Total de Registros: ",null==t.page?null:t.page.totalElements," | P\xe1gina ",null==t.page?null:t.page.pageNumber," de ",null==t.page?null:t.page.totalPages," "))},directives:[r.n,r.i,r.k,o.l,o.m,l.c,r.l,r.p,a.f],pipes:[l.b],encapsulation:2}),e})();var A=i("AytR"),y=i("XgRA");function C(e,t,i,r){return new(i||(i=Promise))(function(o,a){function s(e){try{c(r.next(e))}catch(t){a(t)}}function n(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,n)}c((r=r.apply(e,t||[])).next())})}var w=i("jhN1");const S=["wrapper"],I=["sourceImage"];function z(e,t){if(1&e){const e=s.Zb();s.Yb(0,"img",4,5),s.ic("load",function(){return s.Cc(e),s.kc().imageLoadedInView()}),s.Xb()}if(2&e){const e=s.kc();s.Gc("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),s.rc("src",e.safeImgDataUrl,s.Ec)}}function R(e,t){if(1&e){const e=s.Zb();s.Wb(0),s.Yb(1,"span",9),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"topleft")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"topleft")}),s.Ub(2,"span",10),s.Xb(),s.Yb(3,"span",11),s.Ub(4,"span",10),s.Xb(),s.Yb(5,"span",12),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"topright")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"topright")}),s.Ub(6,"span",10),s.Xb(),s.Yb(7,"span",13),s.Ub(8,"span",10),s.Xb(),s.Yb(9,"span",14),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"bottomright")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"bottomright")}),s.Ub(10,"span",10),s.Xb(),s.Yb(11,"span",15),s.Ub(12,"span",10),s.Xb(),s.Yb(13,"span",16),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"bottomleft")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"bottomleft")}),s.Ub(14,"span",10),s.Xb(),s.Yb(15,"span",17),s.Ub(16,"span",10),s.Xb(),s.Yb(17,"span",18),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"top")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"top")}),s.Xb(),s.Yb(18,"span",19),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"right")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"right")}),s.Xb(),s.Yb(19,"span",20),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"bottom")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"bottom")}),s.Xb(),s.Yb(20,"span",21),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"left")})("touchstart",function(t){s.Cc(e);const i=s.kc(2);return i.startMove(t,i.moveTypes.Resize,"left")}),s.Xb(),s.Vb()}}function H(e,t){if(1&e){const e=s.Zb();s.Yb(0,"div",6),s.ic("keydown",function(t){return s.Cc(e),s.kc().keyboardAccess(t)}),s.Yb(1,"div",7),s.ic("mousedown",function(t){s.Cc(e);const i=s.kc();return i.startMove(t,i.moveTypes.Move)})("touchstart",function(t){s.Cc(e);const i=s.kc();return i.startMove(t,i.moveTypes.Move)}),s.Xb(),s.Hc(2,R,21,0,"ng-container",8),s.Xb()}if(2&e){const e=s.kc();s.Gc("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left","center"===e.alignImage?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),s.Lb("rounded",e.roundCropper),s.Hb(2),s.rc("ngIf",!e.hideResizeSquares)}}const P={Move:"move",Resize:"resize",Pinch:"pinch"};let X=(()=>{class e{crop(e,t,i,r){const o=this.getImagePosition(e,t,i,r),a=o.x2-o.x1,s=o.y2-o.y1,n=document.createElement("canvas");n.width=a,n.height=s;const c=n.getContext("2d");if(!c)return;null!=r.backgroundColor&&(c.fillStyle=r.backgroundColor,c.fillRect(0,0,a,s));const h=(r.transform.scale||1)*(r.transform.flipH?-1:1),p=(r.transform.scale||1)*(r.transform.flipV?-1:1),d=t.transformed;c.setTransform(h,0,0,p,d.size.width/2,d.size.height/2),c.translate(-o.x1/h,-o.y1/p),c.rotate((r.transform.rotate||0)*Math.PI/180),c.drawImage(d.image,-d.size.width/2,-d.size.height/2);const l={width:a,height:s,imagePosition:o,cropperPosition:Object.assign({},i)};r.containWithinAspectRatio&&(l.offsetImagePosition=this.getOffsetImagePosition(e,t,i,r));const g=this.getResizeRatio(a,s,r);return 1!==g&&(l.width=Math.round(a*g),l.height=r.maintainAspectRatio?Math.round(l.width/r.aspectRatio):Math.round(s*g),function(e,t,i){const r=e.width,o=e.height,a=r/(t=Math.round(t)),s=o/(i=Math.round(i)),n=Math.ceil(a/2),c=Math.ceil(s/2),h=e.getContext("2d");if(h){const p=h.getImageData(0,0,r,o),d=h.createImageData(t,i),l=p.data,g=d.data;for(let e=0;e<i;e++)for(let i=0;i<t;i++){const h=4*(i+e*t),p=e*s;let d=0,m=0,b=0,u=0,f=0,v=0,x=0;const M=Math.floor(i*a),A=Math.floor(e*s);let y=Math.ceil((i+1)*a),C=Math.ceil((e+1)*s);y=Math.min(y,r),C=Math.min(C,o);for(let e=A;e<C;e++){const t=Math.abs(p-e)/c,o=i*a,s=t*t;for(let i=M;i<y;i++){const t=Math.abs(o-i)/n,a=Math.sqrt(s+t*t);if(a>=1)continue;d=2*a*a*a-3*a*a+1;const c=4*(i+e*r);x+=d*l[c+3],b+=d,l[c+3]<255&&(d=d*l[c+3]/250),u+=d*l[c],f+=d*l[c+1],v+=d*l[c+2],m+=d}}g[h]=u/m,g[h+1]=f/m,g[h+2]=v/m,g[h+3]=x/b}e.width=t,e.height=i,h.putImageData(d,0,0)}}(n,l.width,l.height)),l.base64=n.toDataURL("image/"+r.format,this.getQuality(r)),l}getImagePosition(e,t,i,r){const o=t.transformed.size.width/e.nativeElement.offsetWidth,a={x1:Math.round(i.x1*o),y1:Math.round(i.y1*o),x2:Math.round(i.x2*o),y2:Math.round(i.y2*o)};return r.containWithinAspectRatio||(a.x1=Math.max(a.x1,0),a.y1=Math.max(a.y1,0),a.x2=Math.min(a.x2,t.transformed.size.width),a.y2=Math.min(a.y2,t.transformed.size.height)),a}getOffsetImagePosition(e,t,i,r){const o=t.transformed.size.width/e.nativeElement.offsetWidth;let a,s;(r.canvasRotation+t.exifTransform.rotate)%2?(a=(t.transformed.size.width-t.original.size.height)/2,s=(t.transformed.size.height-t.original.size.width)/2):(a=(t.transformed.size.width-t.original.size.width)/2,s=(t.transformed.size.height-t.original.size.height)/2);const n={x1:Math.round(i.x1*o)-a,y1:Math.round(i.y1*o)-s,x2:Math.round(i.x2*o)-a,y2:Math.round(i.y2*o)-s};return r.containWithinAspectRatio||(n.x1=Math.max(n.x1,0),n.y1=Math.max(n.y1,0),n.x2=Math.min(n.x2,t.transformed.size.width),n.y2=Math.min(n.y2,t.transformed.size.height)),n}getResizeRatio(e,t,i){const r=i.resizeToWidth/e,o=i.resizeToHeight/t,a=new Array;i.resizeToWidth>0&&a.push(r),i.resizeToHeight>0&&a.push(o);const s=0===a.length?1:Math.min(...a);return s>1&&!i.onlyScaleDown?s:Math.min(s,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(s.Pb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();class Y{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=void 0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(e){Object.keys(e).filter(e=>e in this).forEach(t=>this[t]=e[t])}setOptionsFromChanges(e){Object.keys(e).filter(e=>e in this).forEach(t=>this[t]=e[t].currentValue)}}let k=(()=>{class e{constructor(){this.autoRotateSupported=new Promise(e=>{const t=new Image;t.onload=()=>{e(1===t.width&&2===t.height)},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}loadImageFile(e,t){return new Promise((i,r)=>{const o=new FileReader;o.onload=o=>{this.loadImage(o.target.result,e.type,t).then(i).catch(r)},o.readAsDataURL(e)})}loadImage(e,t,i){return this.isValidImageType(t)?this.loadBase64Image(e,i):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(e)}loadImageFromURL(e,t){return new Promise((i,r)=>{const o=new Image;o.onerror=()=>r,o.onload=()=>{const e=document.createElement("canvas"),r=e.getContext("2d");e.width=o.width,e.height=o.height,r.drawImage(o,0,0),this.loadBase64Image(e.toDataURL(),t).then(i)},o.crossOrigin="anonymous",o.src=e})}loadBase64Image(e,t){return new Promise((t,i)=>{const r=new Image;r.onload=()=>t({originalImage:r,originalBase64:e}),r.onerror=i,r.src=e}).then(e=>this.transformImageBase64(e,t))}transformImageBase64(e,t){return C(this,void 0,void 0,function*(){const i=yield this.autoRotateSupported,r=yield function(e){switch("string"==typeof e&&(e=function(e){const t=new DataView(function(e){e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");const t=atob(e),i=t.length,r=new Uint8Array(i);for(let o=0;o<i;o++)r[o]=t.charCodeAt(o);return r.buffer}(e));if(65496!=t.getUint16(0,!1))return-2;const i=t.byteLength;let r=2;for(;r<i;){if(t.getUint16(r+2,!1)<=8)return-1;const e=t.getUint16(r,!1);if(r+=2,65505==e){if(1165519206!=t.getUint32(r+=2,!1))return-1;const e=18761==t.getUint16(r+=6,!1);r+=t.getUint32(r+4,e);const i=t.getUint16(r,e);r+=2;for(let o=0;o<i;o++)if(274==t.getUint16(r+12*o,e))return t.getUint16(r+12*o+8,e)}else{if(65280!=(65280&e))break;r+=t.getUint16(r,!1)}}return-1}(e)),e){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(i?-1:e.originalBase64);return e.originalImage&&e.originalImage.complete?this.transformLoadedImage({original:{base64:e.originalBase64,image:e.originalImage,size:{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:r},t):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(e,t){return C(this,void 0,void 0,function*(){const i=t.canvasRotation+e.exifTransform.rotate,r={width:e.original.image.naturalWidth,height:e.original.image.naturalHeight};if(0===i&&!e.exifTransform.flip&&!t.containWithinAspectRatio)return{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},r)},transformed:{base64:e.original.base64,image:e.original.image,size:Object.assign({},r)},exifTransform:e.exifTransform};const o=this.getTransformedSize(r,e.exifTransform,t),a=document.createElement("canvas");a.width=o.width,a.height=o.height;const s=a.getContext("2d");s.setTransform(e.exifTransform.flip?-1:1,0,0,1,a.width/2,a.height/2),s.rotate(Math.PI*(i/2)),s.drawImage(e.original.image,-r.width/2,-r.height/2);const n=a.toDataURL(),c=yield this.loadImageFromBase64(n);return{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},r)},transformed:{base64:n,image:c,size:{width:c.width,height:c.height}},exifTransform:e.exifTransform}})}loadImageFromBase64(e){return new Promise((t,i)=>{const r=new Image;r.onload=()=>t(r),r.onerror=i,r.src=e})}getTransformedSize(e,t,i){const r=i.canvasRotation+t.rotate;if(i.containWithinAspectRatio){if(r%2){const t=e.height/i.aspectRatio;return{width:Math.max(e.height,e.width*i.aspectRatio),height:Math.max(e.width,t)}}{const t=e.width/i.aspectRatio;return{width:Math.max(e.width,e.height*i.aspectRatio),height:Math.max(e.height,t)}}}return r%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(s.Pb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),O=(()=>{class e{resetCropperPosition(e,t,i){const r=e.nativeElement;if(i.cropperStaticHeight&&i.cropperStaticWidth)t.x1=0,t.x2=r.offsetWidth>i.cropperStaticWidth?i.cropperStaticWidth:r.offsetWidth,t.y1=0,t.y2=r.offsetHeight>i.cropperStaticHeight?i.cropperStaticHeight:r.offsetHeight;else{const e=Math.min(i.cropperScaledMaxWidth,r.offsetWidth),o=Math.min(i.cropperScaledMaxHeight,r.offsetHeight);if(i.maintainAspectRatio)if(e/i.aspectRatio<o){t.x1=0,t.x2=e;const o=e/i.aspectRatio;t.y1=(r.offsetHeight-o)/2,t.y2=t.y1+o}else{t.y1=0,t.y2=o;const e=o*i.aspectRatio;t.x1=(r.offsetWidth-e)/2,t.x2=t.x1+e}else t.x1=0,t.x2=e,t.y1=0,t.y2=o}}move(e,t,i){const r=this.getClientX(e)-t.clientX,o=this.getClientY(e)-t.clientY;i.x1=t.x1+r,i.y1=t.y1+o,i.x2=t.x2+r,i.y2=t.y2+o}resize(e,t,i,r,o){const a=this.getClientX(e)-t.clientX,s=this.getClientY(e)-t.clientY;switch(t.position){case"left":i.x1=Math.min(Math.max(t.x1+a,i.x2-o.cropperScaledMaxWidth),i.x2-o.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(t.x1+a,i.x2-o.cropperScaledMaxWidth),i.x2-o.cropperScaledMinWidth),i.y1=Math.min(Math.max(t.y1+s,i.y2-o.cropperScaledMaxHeight),i.y2-o.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(t.y1+s,i.y2-o.cropperScaledMaxHeight),i.y2-o.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(t.x2+a,i.x1+o.cropperScaledMaxWidth),i.x1+o.cropperScaledMinWidth),i.y1=Math.min(Math.max(t.y1+s,i.y2-o.cropperScaledMaxHeight),i.y2-o.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(t.x2+a,i.x1+o.cropperScaledMaxWidth),i.x1+o.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(t.x2+a,i.x1+o.cropperScaledMaxWidth),i.x1+o.cropperScaledMinWidth),i.y2=Math.max(Math.min(t.y2+s,i.y1+o.cropperScaledMaxHeight),i.y1+o.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(t.y2+s,i.y1+o.cropperScaledMaxHeight),i.y1+o.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(t.x1+a,i.x2-o.cropperScaledMaxWidth),i.x2-o.cropperScaledMinWidth),i.y2=Math.max(Math.min(t.y2+s,i.y1+o.cropperScaledMaxHeight),i.y1+o.cropperScaledMinHeight);break;case"center":const n=e.scale,c=Math.min(Math.max(o.cropperScaledMinWidth,Math.abs(t.x2-t.x1)*n),o.cropperScaledMaxWidth),h=Math.min(Math.max(o.cropperScaledMinHeight,Math.abs(t.y2-t.y1)*n),o.cropperScaledMaxHeight);i.x1=t.clientX-c/2,i.x2=t.clientX+c/2,i.y1=t.clientY-h/2,i.y2=t.clientY+h/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>r.width&&(i.x1-=i.x2-r.width,i.x2=r.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>r.height&&(i.y1-=i.y2-r.height,i.y2=r.height)}o.maintainAspectRatio&&this.checkAspectRatio(t.position,i,r,o)}checkAspectRatio(e,t,i,r){let o=0,a=0;switch(e){case"top":t.x2=t.x1+(t.y2-t.y1)*r.aspectRatio,o=Math.max(t.x2-i.width,0),a=Math.max(0-t.y1,0),(o>0||a>0)&&(t.x2-=a*r.aspectRatio>o?a*r.aspectRatio:o,t.y1+=a*r.aspectRatio>o?a:o/r.aspectRatio);break;case"bottom":t.x2=t.x1+(t.y2-t.y1)*r.aspectRatio,o=Math.max(t.x2-i.width,0),a=Math.max(t.y2-i.height,0),(o>0||a>0)&&(t.x2-=a*r.aspectRatio>o?a*r.aspectRatio:o,t.y2-=a*r.aspectRatio>o?a:o/r.aspectRatio);break;case"topleft":t.y1=t.y2-(t.x2-t.x1)/r.aspectRatio,o=Math.max(0-t.x1,0),a=Math.max(0-t.y1,0),(o>0||a>0)&&(t.x1+=a*r.aspectRatio>o?a*r.aspectRatio:o,t.y1+=a*r.aspectRatio>o?a:o/r.aspectRatio);break;case"topright":t.y1=t.y2-(t.x2-t.x1)/r.aspectRatio,o=Math.max(t.x2-i.width,0),a=Math.max(0-t.y1,0),(o>0||a>0)&&(t.x2-=a*r.aspectRatio>o?a*r.aspectRatio:o,t.y1+=a*r.aspectRatio>o?a:o/r.aspectRatio);break;case"right":case"bottomright":t.y2=t.y1+(t.x2-t.x1)/r.aspectRatio,o=Math.max(t.x2-i.width,0),a=Math.max(t.y2-i.height,0),(o>0||a>0)&&(t.x2-=a*r.aspectRatio>o?a*r.aspectRatio:o,t.y2-=a*r.aspectRatio>o?a:o/r.aspectRatio);break;case"left":case"bottomleft":t.y2=t.y1+(t.x2-t.x1)/r.aspectRatio,o=Math.max(0-t.x1,0),a=Math.max(t.y2-i.height,0),(o>0||a>0)&&(t.x1+=a*r.aspectRatio>o?a*r.aspectRatio:o,t.y2-=a*r.aspectRatio>o?a:o/r.aspectRatio);break;case"center":t.x2=t.x1+(t.y2-t.y1)*r.aspectRatio,t.y2=t.y1+(t.x2-t.x1)/r.aspectRatio;const e=Math.max(0-t.x1,0),s=Math.max(t.x2-i.width,0),n=Math.max(t.y2-i.height,0),c=Math.max(0-t.y1,0);(e>0||s>0||n>0||c>0)&&(t.x1+=n*r.aspectRatio>e?n*r.aspectRatio:e,t.x2-=c*r.aspectRatio>s?c*r.aspectRatio:s,t.y1+=c*r.aspectRatio>s?c:s/r.aspectRatio,t.y2-=n*r.aspectRatio>e?n:e/r.aspectRatio)}}getClientX(e){return(e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX)||0}getClientY(e){return(e.touches&&e.touches[0]?e.touches[0].clientY:e.clientY)||0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(s.Pb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),E=(()=>{class e{constructor(e,t,i,r,o){this.cropService=e,this.cropperPositionService=t,this.loadImageService=i,this.sanitizer=r,this.cd=o,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.settings=new Y,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.moveTypes=P,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new s.q,this.startCropImage=new s.q,this.imageLoaded=new s.q,this.cropperReady=new s.q,this.loadImageFailed=new s.q,this.reset()}ngOnChanges(e){this.onChangesUpdateSettings(e),this.onChangesInputImage(e),this.loadedImage&&this.loadedImage.original.image.complete&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e)),e.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),e.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.base64),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.loadedImage&&(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const e=new this.Hammer(this.wrapper.nativeElement);e.get("pinch").set({enable:!0}),e.on("pinchmove",this.onPinch.bind(this)),e.on("pinchend",this.pinchStop.bind(this)),e.on("pinchstart",this.startPinch.bind(this))}else Object(s.bb)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const e=this.sourceImage.nativeElement;this.maxSize.width===e.offsetWidth&&this.maxSize.height===e.offsetHeight||(this.cropper.x1=this.cropper.x1*e.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*e.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*e.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*e.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){e.key>="1"&&e.key<="9"&&(this.settings.stepSize=+e.key)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const t=e.shiftKey?P.Resize:P.Move,i=e.altKey?function(e){switch(e){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}(e.key):function(e){switch(e){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}(e.key),r=function(e,t){switch(e){case"ArrowUp":return{clientX:0,clientY:-1*t};case"ArrowRight":return{clientX:t,clientY:0};case"ArrowDown":return{clientX:0,clientY:t};case"ArrowLeft":default:return{clientX:-1*t,clientY:0}}}(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},t,i),this.moveImg(r),this.moveStop()}startMove(e,t,i=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===P.Pinch||(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:t,position:i,clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper))}startPinch(e){this.safeImgDataUrl&&(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:P.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===P.Move?(this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0)):this.moveStart.type===P.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===P.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const e=this.sourceImage.nativeElement;this.maxSize.width=e.offsetWidth,this.maxSize.height=e.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image){const e=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/e:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/e:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.loadedImage.transformed.image){this.startCropImage.emit();const e=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=e&&this.imageCropped.emit(e),e}return null}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(X),s.Tb(O),s.Tb(k),s.Tb(w.b),s.Tb(s.i))},e.\u0275cmp=s.Nb({type:e,selectors:[["image-cropper"]],viewQuery:function(e,t){if(1&e&&(s.Oc(S,3),s.Oc(I,1)),2&e){let e;s.yc(e=s.jc())&&(t.wrapper=e.first),s.yc(e=s.jc())&&(t.sourceImage=e.first)}},hostVars:4,hostBindings:function(e,t){1&e&&s.ic("resize",function(){return t.onResize()},!1,s.Bc)("mousemove",function(e){return t.moveImg(e)},!1,s.Ac)("touchmove",function(e){return t.moveImg(e)},!1,s.Ac)("mouseup",function(){return t.moveStop()},!1,s.Ac)("touchend",function(){return t.moveStop()},!1,s.Ac),2&e&&(s.Gc("text-align",t.alignImage),s.Lb("disabled",t.disabled))},inputs:{format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[s.Fb],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(e,t){1&e&&(s.Yb(0,"div",null,0),s.Hc(2,z,2,5,"img",1),s.Ub(3,"div",2),s.Hc(4,H,3,15,"div",3),s.Xb()),2&e&&(s.Gc("background",t.imageVisible&&t.backgroundColor),s.Hb(2),s.rc("ngIf",t.safeImgDataUrl),s.Hb(1),s.Gc("width",t.maxSize.width,"px")("height",t.maxSize.height,"px")("margin-left","center"===t.alignImage?t.marginLeft:null),s.Hb(1),s.rc("ngIf",t.imageVisible))},directives:[o.m],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),e})(),U=(()=>{class e{}return e.\u0275mod=s.Rb({type:e}),e.\u0275inj=s.Qb({factory:function(t){return new(t||e)},imports:[[o.b]]}),e})();function W(e){const t=e.split(","),i=t[0].replace("data:","").replace(";base64",""),r=atob(t[1]),o=new ArrayBuffer(r.length),a=new Uint8Array(o);for(let s=0;s<r.length;s+=1)a[s]=r.charCodeAt(s);return new Blob([o],{type:i})}var T=i("tk/3"),_=i("+QgE"),B=i("z6cu"),L=i("JIr8");const Q=`${A.a.apiUrl}/photos/uploadimage`;let F=(()=>{class e{constructor(e){this.http=e}uploadWithProgress(e){return this.http.post(Q,e,{observe:"events",reportProgress:!0}).pipe(Object(L.a)(e=>this.handleError(e)))}handleError(e){return Object(B.a)(e)}}return e.\u0275fac=function(t){return new(t||e)(s.fc(T.b))},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=i("EJ4i");function N(e,t){1&e&&(s.Yb(0,"h4"),s.Ub(1,"i",46),s.Jc(2,"Agregar Usuario "),s.Xb())}function D(e,t){1&e&&(s.Yb(0,"h4"),s.Ub(1,"i",47),s.Jc(2,"Editar Usuario "),s.Xb())}function j(e,t){if(1&e&&s.Ub(0,"img",48),2&e){const e=s.kc();s.rc("src",e.croppedImage,s.Ec)}}function q(e,t){if(1&e&&(s.Yb(0,"div",52),s.Yb(1,"p"),s.Jc(2,"Imagen subida con \xe9xito."),s.Xb(),s.Yb(3,"b"),s.Jc(4),s.Xb(),s.Xb()),2&e){const e=s.kc(2);s.Hb(4),s.Kc(e.urlAfterUpload)}}function V(e,t){if(1&e&&(s.Yb(0,"div",15),s.Jc(1),s.Yb(2,"div",49),s.Ub(3,"div",50),s.Xb(),s.Hc(4,q,5,1,"div",51),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.Lc(" Subiendo ",e.percentCompleted,"% "),s.Hb(2),s.Gc("width",e.percentCompleted,"%"),s.Hb(1),s.rc("ngIf",e.isSingleUploaded)}}function K(e,t){if(1&e&&s.Ub(0,"img",48),2&e){const e=s.kc();s.sc("src",e.currentImagePath,s.Ec)}}function G(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1,"UserId es obligatorio"),s.Xb())}function $(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,G,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.firstName.errors.required)}}function Z(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1,"RoleId es obligatorio"),s.Xb())}function ee(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,Z,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.firstName.errors.required)}}function te(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," Nombres es obligatorio "),s.Xb())}function ie(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,te,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.firstName.errors.required)}}function re(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," Apellidos es obligatorio "),s.Xb())}function oe(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,re,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.lastName.errors.required)}}function ae(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1,"Email es obligatorio"),s.Xb())}function se(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," Email debe ser una direcci\xf3n v\xe1lida "),s.Xb())}function ne(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,ae,2,0,"div",2),s.Hc(2,se,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.email.errors.required),s.Hb(1),s.rc("ngIf",e.f.email.errors.email)}}function ce(e,t){if(1&e&&(s.Yb(0,"option",54),s.Jc(1),s.Xb()),2&e){const e=t.$implicit;s.sc("value",e.roleId),s.Hb(1),s.Lc(" ",e.roleName," ")}}function he(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1,"Rol es obligatorio"),s.Xb())}function pe(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,he,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.role.errors.required)}}function de(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1,"Activo es obligatorio"),s.Xb())}function le(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,de,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.active.errors.required)}}function ge(e,t){1&e&&(s.Yb(0,"div"),s.Yb(1,"h5",55),s.Ub(2,"i",56),s.Jc(3,"Cambio de contrase\xf1a "),s.Xb(),s.Yb(4,"p"),s.Ub(5,"i",57),s.Jc(6,"Deje en blanco para mantener la misma "),s.Xb(),s.Xb())}function me(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," La contrase\xf1a es obligatoria "),s.Xb())}function be(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," La clave debe tener al menos 5 caracteres "),s.Xb())}function ue(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,me,2,0,"div",2),s.Hc(2,be,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.password.errors.required),s.Hb(1),s.rc("ngIf",e.f.password.errors.minlength)}}function fe(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," La confirmaci\xf3n de contrase\xf1a es obligatoria "),s.Xb())}function ve(e,t){1&e&&(s.Yb(0,"div"),s.Jc(1," La contrase\xf1a y su confirmaci\xf3n deben ser iguales "),s.Xb())}function xe(e,t){if(1&e&&(s.Yb(0,"div",53),s.Hc(1,fe,2,0,"div",2),s.Hc(2,ve,2,0,"div",2),s.Xb()),2&e){const e=s.kc();s.Hb(1),s.rc("ngIf",e.f.confirmPassword.errors.required),s.Hb(1),s.rc("ngIf",e.f.confirmPassword.errors.mustMatch)}}function Me(e,t){1&e&&s.Ub(0,"span",58)}const Ae=function(e){return{"is-invalid":e}},ye=new _.a,Ce=`${A.a.baseUrl}/`;let we=(()=>{class e{constructor(e,t,i,r,o,a,s){this.formBuilder=e,this.route=t,this.router=i,this.userService=r,this.fileUploadService=o,this.roleService=a,this.alertService=s,this.imageChangedEvent="",this.currentImagePath="",this.loading=!1,this.submitted=!1,this.roles=new Array,this.activeLabel="No",this.percentCompleted=0,this.urlAfterUpload="",this.isSingleUploaded=!1,this.loadedFlag=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[r.o.minLength(6)];this.isAddMode&&e.push(r.o.required),this.roleService.getAll().pipe(Object(h.a)()).subscribe(e=>{e.listElements.forEach(e=>{e.active&&this.roles.push(e)})});const t={validators:Object(y.b)("password","confirmPassword")};this.form=this.formBuilder.group({file:[null],fileName:[""],userId:["",r.o.required],firstName:["",r.o.required],lastName:["",r.o.required],email:["",[r.o.required,r.o.email]],roleId:["",r.o.required],role:["",r.o.required],password:["",[r.o.minLength(5),this.isAddMode?r.o.required:r.o.nullValidator]],confirmPassword:["",this.isAddMode?r.o.required:r.o.nullValidator],active:["",r.o.required]},t),this.isAddMode||this.userService.getById(this.id).pipe(Object(h.a)()).subscribe(e=>{this.currentUser=e.element,this.refreshCurrentImage(e.element.photo.path),this.form.patchValue(e.element),this.form.controls.role.patchValue(e.element.roleId),this.form.controls.roleId.patchValue(e.element.roleId),this.form.controls.active.patchValue(e.element.active),this.activeToggle()})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.userService.create(this.form.value).pipe(Object(h.a)()).subscribe(()=>{this.alertService.success("Usuario agregado",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})}).add(()=>this.loading=!1)}updateUser(){this.loadedFlag&&this.form.patchValue({file:this.croppedToFile()}),this.userService.update(this.id,this.form.value).pipe(Object(h.a)()).subscribe(()=>{this.alertService.success("Usuario actualizado",{keepAfterRouteChange:!0}),this.router.navigate(["/users/list"],{relativeTo:this.route})}).add(()=>this.loading=!1)}onChangeRole(e){this.form.controls.roleId.patchValue(e.target.value)}activeToggle(){this.activeLabel=this.form.get("active").value?"S\xed":"No"}fileChangeEvent(e){this.currentUser.photoId=0,this.imageChangedEvent=e}imageCropped(e){this.croppedImage=e.base64;var t=new FormData;this.urlAfterUpload="",this.isSingleUploaded=!1;const i=this.croppedToFile();t.append("file",i),t.append("category","avatars"),this.fileUploadService.uploadWithProgress(t).subscribe(e=>{e.type===T.d.UploadProgress?this.percentCompleted=Math.round(100*e.loaded/e.total):e instanceof T.e&&(this.isSingleUploaded=!0,this.urlAfterUpload="Tama\xf1o: "+ye.transform(i.size)+", Dimensiones: 150 x 150 pixels",this.refreshCurrentImage(e.body.path))},e=>console.log(e))}imageLoaded(){this.loadedFlag=!0}cropperReady(){}loadImageFailed(){this.loadedFlag=!1}croppedToFile(){return new File([W(this.croppedImage)],"user-avatar"+this.currentUser.userId+".png")}refreshCurrentImage(e){this.currentImagePath=Ce+e+"?random+="+Math.random()}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(r.c),s.Tb(a.a),s.Tb(a.c),s.Tb(d.f),s.Tb(F),s.Tb(J.a),s.Tb(d.b))},e.\u0275cmp=s.Nb({type:e,selectors:[["ng-component"]],decls:94,vars:57,consts:[[1,"p-4"],[1,"container",2,"background-color","rgba(255, 255, 255, 0.4)","border-radius","4px","padding","10px 10px","box-shadow","0 0 25px -6px rgba(0, 0, 0, 0.9)"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","m-2"],[1,"form-group"],[1,"text-center","col"],[1,"row",3,"hidden"],["imageURL","","format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"col","g-4"],[1,"text-center","col","m-2"],[1,"row"],[1,"col",3,"hidden"],["width","150px","height","150px",3,"src",4,"ngIf"],["class","col",4,"ngIf"],[1,"col"],["type","file","formControlName","fileName","accept",".png, .jpg","id","file",1,"form-control",3,"hidden","ngClass","change"],[1,"form-group","col"],["type","hidden","formControlName","userId",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","hidden","formControlName","roleId",1,"form-control",3,"ngClass"],[1,"row","g-2"],[1,"form-floating"],["type","text","formControlName","firstName","placeholder","Daniela","id","firstName",1,"form-control",3,"ngClass"],["for","firstName"],["type","text","formControlName","lastName","placeholder","D\xedaz","id","lastName",1,"form-control",3,"ngClass"],["for","lastName"],[1,"row","g-3"],["type","text","formControlName","email","placeholder","email@net.com","id","email",1,"form-control",3,"ngClass"],["for","email"],["formControlName","role","id","role","aria-label","Rol",1,"form-select",3,"ngClass","change"],[3,"value",4,"ngFor","ngForOf"],["for","role"],[2,"display","block","background-color","rgba(255, 255, 255)","border-radius","4px","padding-left","0.5rem","padding-top","0.2rem"],[2,"color","grey","font-size","small"],[1,"form-check","form-switch",2,"margin-top","0.3rem"],["type","checkbox","formControlName","active",1,"form-check-input",3,"ngClass","change"],["for","Active",1,"form-check-label"],["type","password","formControlName","password","id","password","placeholder","password",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","confirmPassword","id","confirmPassword","placeholder","confirmPassword",1,"form-control",3,"ngClass"],["for","confirmPassword"],[2,"float","right"],[1,"btn","btn-primary","me-2",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users/list",1,"btn","btn-secondary"],[1,"bi-person-plus-fill",2,"color","black","margin-right","8px"],[1,"bi-person-check-fill",2,"color","black","margin-right","8px"],["width","150px","height","150px",3,"src"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],["class","success",4,"ngIf"],[1,"success"],[1,"invalid-feedback"],[3,"value"],[1,"pt-3"],[1,"bi-key",2,"color","black","margin-right","8px"],[1,"bi-lightbulb",2,"color","black","margin-right","8px"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Hc(2,N,3,0,"h4",2),s.Hc(3,D,3,0,"h4",2),s.Ub(4,"hr"),s.Yb(5,"form",3),s.ic("ngSubmit",function(){return t.onSubmit()}),s.Yb(6,"div",4),s.Yb(7,"div",5),s.Yb(8,"div",6),s.Yb(9,"div",7),s.Yb(10,"div",6),s.Yb(11,"h6"),s.Jc(12,"Recorte la Imagen"),s.Xb(),s.Yb(13,"image-cropper",8),s.ic("imageCropped",function(e){return t.imageCropped(e)})("imageLoaded",function(){return t.imageLoaded()})("cropperReady",function(){return t.cropperReady()})("loadImageFailed",function(){return t.loadImageFailed()}),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(14,"div",9),s.Yb(15,"div",10),s.Yb(16,"div",11),s.Yb(17,"div",12),s.Yb(18,"h6"),s.Jc(19,"Vista Previa"),s.Xb(),s.Hc(20,j,1,1,"img",13),s.Xb(),s.Hc(21,V,5,4,"div",14),s.Yb(22,"div",15),s.Yb(23,"h6"),s.Jc(24,"Imagen Actual"),s.Xb(),s.Hc(25,K,1,1,"img",13),s.Xb(),s.Xb(),s.Xb(),s.Yb(26,"input",16),s.ic("change",function(e){return t.fileChangeEvent(e)}),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(27,"div",11),s.Yb(28,"div",17),s.Ub(29,"input",18),s.Hc(30,$,2,1,"div",19),s.Xb(),s.Yb(31,"div",17),s.Ub(32,"input",20),s.Hc(33,ee,2,1,"div",19),s.Xb(),s.Xb(),s.Yb(34,"div",21),s.Yb(35,"div",17),s.Yb(36,"div",22),s.Ub(37,"input",23),s.Yb(38,"label",24),s.Jc(39,"Nombres"),s.Xb(),s.Hc(40,ie,2,1,"div",19),s.Xb(),s.Xb(),s.Yb(41,"div",17),s.Yb(42,"div",22),s.Ub(43,"input",25),s.Yb(44,"label",26),s.Jc(45,"Apellidos"),s.Xb(),s.Hc(46,oe,2,1,"div",19),s.Xb(),s.Xb(),s.Xb(),s.Ub(47,"br"),s.Yb(48,"div",27),s.Yb(49,"div",17),s.Yb(50,"div",22),s.Ub(51,"input",28),s.Yb(52,"label",29),s.Jc(53,"Email"),s.Xb(),s.Hc(54,ne,3,2,"div",19),s.Xb(),s.Xb(),s.Yb(55,"div",17),s.Yb(56,"div",22),s.Yb(57,"select",30),s.ic("change",function(e){return t.onChangeRole(e)}),s.Hc(58,ce,2,2,"option",31),s.Xb(),s.Yb(59,"label",32),s.Jc(60,"Rol"),s.Xb(),s.Hc(61,pe,2,1,"div",19),s.Xb(),s.Xb(),s.Yb(62,"div",17),s.Yb(63,"div",33),s.Yb(64,"label",34),s.Jc(65,"Activo"),s.Xb(),s.Yb(66,"div",35),s.Yb(67,"input",36),s.ic("change",function(){return t.activeToggle()}),s.Xb(),s.Yb(68,"label",37),s.Jc(69),s.Xb(),s.Xb(),s.Hc(70,le,2,1,"div",19),s.Xb(),s.Xb(),s.Xb(),s.Hc(71,ge,7,0,"div",2),s.Yb(72,"div",11),s.Yb(73,"div",17),s.Yb(74,"div",22),s.Ub(75,"input",38),s.Yb(76,"label",39),s.Jc(77,"Contrase\xf1a"),s.Xb(),s.Hc(78,ue,3,2,"div",19),s.Xb(),s.Xb(),s.Yb(79,"div",17),s.Yb(80,"div",22),s.Ub(81,"input",40),s.Yb(82,"label",41),s.Jc(83,"Confirmaci\xf3n de Contrase\xf1a"),s.Xb(),s.Hc(84,xe,3,2,"div",19),s.Xb(),s.Xb(),s.Xb(),s.Ub(85,"hr"),s.Yb(86,"div",11),s.Yb(87,"div",5),s.Yb(88,"div",42),s.Yb(89,"button",43),s.Hc(90,Me,1,0,"span",44),s.Jc(91," Guardar "),s.Xb(),s.Yb(92,"button",45),s.Jc(93," Cancelar "),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&e&&(s.Hb(2),s.rc("ngIf",t.isAddMode),s.Hb(1),s.rc("ngIf",!t.isAddMode),s.Hb(2),s.rc("formGroup",t.form),s.Hb(4),s.rc("hidden",!(t.id>1)),s.Hb(4),s.rc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",150),s.Hb(4),s.rc("hidden",!(t.id>1)),s.Hb(3),s.rc("ngIf",t.croppedImage),s.Hb(1),s.rc("ngIf",t.percentCompleted>0),s.Hb(4),s.rc("ngIf",t.currentUser),s.Hb(1),s.rc("hidden",!(t.id>1))("ngClass",s.vc(37,Ae,t.submitted&&t.f.fileName.errors)),s.Hb(3),s.rc("ngClass",s.vc(39,Ae,t.submitted&&t.f.userId.errors)),s.Hb(1),s.rc("ngIf",t.submitted&&t.f.firstName.errors),s.Hb(2),s.rc("ngClass",s.vc(41,Ae,t.submitted&&t.f.roleId.errors)),s.Hb(1),s.rc("ngIf",t.submitted&&t.f.firstName.errors),s.Hb(4),s.rc("ngClass",s.vc(43,Ae,t.submitted&&t.f.firstName.errors)),s.Hb(3),s.rc("ngIf",t.submitted&&t.f.firstName.errors),s.Hb(3),s.rc("ngClass",s.vc(45,Ae,t.submitted&&t.f.lastName.errors)),s.Hb(3),s.rc("ngIf",t.submitted&&t.f.lastName.errors),s.Hb(5),s.rc("ngClass",s.vc(47,Ae,t.submitted&&t.f.email.errors)),s.Hb(3),s.rc("ngIf",t.submitted&&t.f.email.errors),s.Hb(3),s.rc("ngClass",s.vc(49,Ae,t.submitted&&t.f.role.errors)),s.Hb(1),s.rc("ngForOf",t.roles),s.Hb(3),s.rc("ngIf",t.submitted&&t.f.role.errors),s.Hb(6),s.rc("ngClass",s.vc(51,Ae,t.submitted&&t.f.active.errors)),s.Hb(2),s.Kc(t.activeLabel),s.Hb(1),s.rc("ngIf",t.submitted&&t.f.active.errors),s.Hb(1),s.rc("ngIf",!t.isAddMode),s.Hb(4),s.rc("ngClass",s.vc(53,Ae,t.submitted&&t.f.password.errors)),s.Hb(3),s.rc("ngIf",t.submitted&&t.f.password.errors),s.Hb(3),s.rc("ngClass",s.vc(55,Ae,t.submitted&&t.f.confirmPassword.errors)),s.Hb(3),s.rc("ngIf",t.submitted&&t.f.confirmPassword.errors),s.Hb(5),s.rc("disabled",t.loading),s.Hb(1),s.rc("ngIf",t.loading))},directives:[o.m,r.q,r.j,r.e,E,r.b,r.i,r.d,o.k,r.n,o.l,r.a,a.d,r.l,r.p],encapsulation:2}),e})();const Se=[{path:"",component:n},{path:"list",component:M,pathMatch:"full"},{path:"add",component:we,pathMatch:"full"},{path:"edit/:id",component:we,pathMatch:"full"}];let Ie=(()=>{class e{}return e.\u0275mod=s.Rb({type:e}),e.\u0275inj=s.Qb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(Se)],a.g]}),e})(),ze=(()=>{class e{}return e.\u0275mod=s.Rb({type:e}),e.\u0275inj=s.Qb({factory:function(t){return new(t||e)},imports:[[o.b,r.f,r.m,Ie,l.a,U]]}),e})()}}]);